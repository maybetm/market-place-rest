# market-place-rest
Рест ядро магазина. Проект не решает никакой проблемы. Это просто учебный проект.

Особенности проекта:
1. Апи сервиса собрано на рест контроллерах Spring Boot 2.1.4. 
2. В качестве основной бд выбрана PostgreSql 10(версия вообще не принципиальна).
3. Для взаимодействия с бд использовались JpaRepository из Spring Data Jpa. Схема бд создаётся на основе созданных jpa сущностей.
4. Для модульных и интеграционных тестов использовался junit + mockito.
5. С помощью плагина surefire из жизненного цикла сборки проекта исключён каталог с модульными тестами и добавлен с интеграционными.
6. Для интеграционных тестов используется postgresql-embedded.
7. Для контроля и ограничения доступа к апи, было принято решение использовать io.jsonwebtoken. Был реализован SecurityHandlerInterceptor для фильтрации всех запросов. 

Недоработки, которые хотелось бы устранить\обдумать, но лень:

1. Можно было разбить всё это дело на микро сервисы/модули. К примеру, отдельно сервер безопасности, отдельно crud-репозиторий с бизнес логикой.
2. Вместо Rest api, можно использовать GraphQL. Или как-то их совместить. 
3. Почему-то я не использовал dto/pojo классы для представления данных. Решил всё делать в сущностях Jpa, думаю это небезопасно, да и неудобно.
4. Я попрежнему считаю, что в больших проектах очень странно использовать голые sql запросы, особенно автогенерируемые спрингом/хибернейтом,
так-как намного сложнее отлаживать взаимодействие приложения и бд. А найти проблему в случае возникновения ошиюки становится сильно сложнее. Не решена проблема n+1 запросов.
5. jpa сущности должны быть всё-таки без геттеров и сеттеров. В них не должно быть намешано ничего постароннего (джексон, использовался как dto/pojo объект).
6. Интеграционные тесты лучше проводить не с помощью Junit. В этом проекте было решено использовать junit с синхронным вызовом помеченных аннотацией методовю.
7. Для данного проекта не самая лучшая идея в принципе использовать jwt токены. В качестве альтернативы можно было использовать аутентификацию по сертификатам.
8. Возможно не лучший плагин был выбран для исключения модульных тестов из фазы сборки проекта. Возможно не лучшая идея была модульные тесты из проекта отключать. Но это можно регулировать добавлением новых фаз и профилей.
Плагин surefire подпортил ситуацию с курилицей в проекте.
9. Планировалось добавить MongoDB или какую-нибудь другую noSql бд для хранения изображений товаров, но зачем? Слишком много гемора.
10. Тема работы со временем не раскрыта. Хотелось хранить время в uts-0 в юникс-тайме, без всяких свистоперделок. Неопределился, так наверно тоже нормально.
11. Встроенная бд может забивать оперативную память и процессорное время. Иногда во время разработки можно заметить огромное количество процессов postgresql и ахнуть.
12. Хотелось добавить сюда swagger или аналоги ради интереса.